<div class="submission-detail-container">
  <!-- Notification Component -->
  <app-notification
    *ngIf="showNotification"
    [type]="notificationType"
    [title]="notificationTitle"
    [message]="notificationMessage"
    (close)="closeNotification()">
  </app-notification>

  <h2>Chi tiết bài nộp</h2>
  <div class="student-info" *ngIf="student">
    <p><b>Họ tên:</b> {{ student.fullName }}</p>
    <p><b>Mã sinh viên:</b> {{ student.studentCode }}</p>
    <p><b>Email:</b> {{ student.email }}</p>
  </div>
  <div class="submission-info" *ngIf="submission">
    <p><b>Ngày nộp:</b> {{ formatDate(submission.submissionDate)}}</p>
    <p><b>File nộp:</b>
      <ng-container *ngIf="submission && isImage(submission.file); else downloadLink">
        <a [href]="getAttachmentUrl(submission.file)" target="_blank">
          <img [src]="getAttachmentUrl(submission.file)" style="max-width: 200px; max-height: 200px; vertical-align: middle; border-radius: 8px;" />
        </a>
      </ng-container>
      <ng-template #downloadLink>
        <a [href]="getAttachmentUrl(submission.file)" [attr.download]="getOriginalFileName(submission.file)">
          {{ getOriginalFileName(submission.file) }}
        </a>
      </ng-template>
    </p>
  </div>
  <div class="grade-box" *ngIf="submission">
    <label>Nhập điểm:</label>
    <input type="number" [(ngModel)]="grade" min="0" max="10" step="0.1" [disabled]="isGrading"/>
    <button (click)="saveGrade()" [disabled]="isGrading">
      <span *ngIf="!isGrading">Lưu điểm</span>
      <span *ngIf="isGrading">Đang lưu...</span>
    </button>
  </div>
</div>
