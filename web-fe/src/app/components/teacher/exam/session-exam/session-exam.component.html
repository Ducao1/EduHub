<div class="session-exam-container">
  <div class="session-exam-content">
    <div class="monitoring-layout">
      <!-- Cột trái: Tiêu đề + trạng thái -->
      <div class="overview-column">
  <div class="session-exam-header">
    <h2>THEO DÕI BÀI THI</h2>
    <div class="exam-info">
      <span class="exam-title">{{ examName }}</span>
      <span class="class-name">{{ className }}</span>
    </div>
  </div>
  <div class="status-summary">
    <div class="status-card" [ngClass]="getStatusClass(ExamStatusType.NOT_STARTED)">
      <div class="status-count">{{ getStatusCount(ExamStatusType.NOT_STARTED) }}</div>
      <div class="status-label">{{ getStatusText(ExamStatusType.NOT_STARTED) }}</div>
    </div>
    <div class="status-card" [ngClass]="getStatusClass(ExamStatusType.IN_PROGRESS)">
      <div class="status-count">{{ getStatusCount(ExamStatusType.IN_PROGRESS) }}</div>
      <div class="status-label">{{ getStatusText(ExamStatusType.IN_PROGRESS) }}</div>
    </div>
    <div class="status-card" [ngClass]="getStatusClass(ExamStatusType.SUBMITTED)">
      <div class="status-count">{{ getStatusCount(ExamStatusType.SUBMITTED) }}</div>
      <div class="status-label">{{ getStatusText(ExamStatusType.SUBMITTED) }}</div>
    </div>
  </div>
      </div>

      <!-- Cột phải: Bảng sinh viên & hoạt động -->
      <div class="details-column">
        <div class="students-activity-table-box">
          <div class="column-header">
            <h3>Danh sách sinh viên & hoạt động ({{ students.length }})</h3>
            <div class="student-actions">
              <button class="btn-refresh" (click)="refreshStudentList()">
                <i class="fas fa-sync-alt"></i> Làm mới
              </button>
            </div>
          </div>
          <div class="students-activity-table-wrapper">
            <table class="students-activity-table">
              <thead>
                <tr>
                  <th>STT</th>
                  <th>Tên sinh viên</th>
                  <th>Trạng thái</th>
                  <th>Log hoạt động</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let student of students; let i = index">
                  <td>{{ i + 1 }}</td>
                  <td>
                    <div class="student-name">{{ student.studentName }}</div>
                    <div class="student-id">ID: {{ student.studentId }}</div>
                  </td>
                  <td>
                    <span class="student-status-badge" [ngClass]="getStatusClass(student.status)">
                      {{ getStatusText(student.status) }}
                    </span>
                  </td>
                  <td>
                    <div class="student-activity-logs">
                      <div *ngFor="let log of getLogsForStudent(student.studentId); let j = index" class="activity-log-item" [ngClass]="getActivityClass(log)">
                        <span class="activity-message">{{ log.message }}</span>
                        <span class="activity-time">{{ log.timestamp | date:'HH:mm:ss' }}</span>
                        <i [class]="getActivityIcon(log)"></i>
                      </div>
                      <div *ngIf="getLogsForStudent(student.studentId).length === 0" class="no-activity">
                        Không có hoạt động
        </div>
      </div>
                  </td>
                </tr>
              </tbody>
            </table>
            <div *ngIf="students.length === 0" class="no-students">
              <p>Chưa có sinh viên nào trong lớp</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>