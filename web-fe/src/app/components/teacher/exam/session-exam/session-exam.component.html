<div class="session-exam-container">
  <div class="session-exam-header">
    <h2>THEO DÕI BÀI THI</h2>
    <div class="exam-info">
      <span class="exam-title">{{ examName }}</span>
      <span class="class-name">{{ className }}</span>
    </div>
  </div>

  <div class="status-summary">
    <div class="status-card" [ngClass]="getStatusClass(ExamStatusType.NOT_STARTED)">
      <div class="status-count">{{ getStatusCount(ExamStatusType.NOT_STARTED) }}</div>
      <div class="status-label">{{ getStatusText(ExamStatusType.NOT_STARTED) }}</div>
    </div>
    <div class="status-card" [ngClass]="getStatusClass(ExamStatusType.IN_PROGRESS)">
      <div class="status-count">{{ getStatusCount(ExamStatusType.IN_PROGRESS) }}</div>
      <div class="status-label">{{ getStatusText(ExamStatusType.IN_PROGRESS) }}</div>
    </div>
    <div class="status-card" [ngClass]="getStatusClass(ExamStatusType.SUBMITTED)">
      <div class="status-count">{{ getStatusCount(ExamStatusType.SUBMITTED) }}</div>
      <div class="status-label">{{ getStatusText(ExamStatusType.SUBMITTED) }}</div>
    </div>
  </div>

  <div class="session-exam-content">
    <div class="tab-container">
      <div class="tab-header">
        <button [class.active]="selectedTab === 'students'" (click)="selectTab('students')">
          Danh sách sinh viên
        </button>
        <button [class.active]="selectedTab === 'activity'" (click)="selectTab('activity')">
          Hoạt động
        </button>
      </div>

      <div class="tab-content" *ngIf="selectedTab === 'students'">
        <div class="student-cards-grid">
          <div class="student-card" *ngFor="let student of students">
            <div class="student-name">{{ student.studentName }}</div>
            <div class="student-status-badge" [ngClass]="getStatusClass(student.status)">
              {{ getStatusText(student.status) }}
            </div>
          </div>
        </div>
      </div>

      <div class="tab-content" *ngIf="selectedTab === 'activity'">
        <div class="activity-header">
          <h3>Log hoạt động sinh viên</h3>
          <div class="activity-actions">
            <button class="btn-clear-cache" (click)="clearActivityCache()">
              Xóa cache
            </button>
            <button class="btn-refresh" (click)="fetchActivityLog()">
              Làm mới
            </button>
          </div>
        </div>
        <div class="activity-list">
          <div class="activity-item" *ngFor="let activity of activities">
            <div class="activity-message">{{ activity.message }}</div>
            <div class="activity-time">{{ activity.timestamp | date:'HH:mm:ss' }}</div>
          </div>
          <div class="no-activity" *ngIf="activities.length === 0">
            <p>Chưa có hoạt động nào được ghi nhận</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>